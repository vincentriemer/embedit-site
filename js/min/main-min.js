function getScrollPosition(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function onScroll(){lastScrollY=getScrollPosition(),requestTick()}function onResize(){bodyHeight=document.body.offsetHeight,viewportHeight=window.innerHeight,parallaxHeight=document.querySelectorAll(".parallax")[0].offsetHeight,requestTick()}function requestTick(){ticking||(requestAnimationFrame(update),ticking=!0)}function getLayers(){return null===layers&&(layers=document.querySelectorAll(".parallax")),layers}function update(){ticking=!1;var e=lastScrollY;console.log(e),0>e&&(e=0),e+viewportHeight>bodyHeight&&(e=bodyHeight-viewportHeight);for(var t=Math.floor(e/parallaxHeight),i=getLayers(),n=i[t],o=parallaxHeight-(e-parallaxHeight*t),a=i.length,l=0;a>l;l++)i[l].style.clip=t>l?"rect(0px,9999px,0px,0px)":l>t?"rect(0px,9999px,"+parallaxHeight+"px,0px)":"rect(0px,9999px,"+o+"px,0px)"}function addFixedStyles(){for(var e=getLayers(),t=e.length,i=0;t>i;i++){var n=e[i];n.classList?n.classList.add("fixed"):n.className+=" fixed"}requestTick()}function requestAnimationFramePolyfill(){for(var e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-lastTime)),o=window.setTimeout(function(){e(i+n)},n);return lastTime=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}var lastScrollY=0,ticking=!1,bodyHeight=0,parallaxHeight=0,viewportHeight=0,lastTime=0,allowParallax=!0,layers=null;document.addEventListener("DOMContentLoaded",function(){requestAnimationFramePolyfill(),bodyHeight=document.body.offsetHeight,viewportHeight=window.innerHeight,parallaxHeight=viewportHeight,allowParallax&&(addFixedStyles(),window.addEventListener("scroll",onScroll,!1),window.addEventListener("resize",onResize,!1))});